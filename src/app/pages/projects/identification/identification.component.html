<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Paso 3: IdentificaciÃ³n - {{project.nombre}}" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

 <div class="row project-wrapper">
    <div class="col-xxl-12">
        
        <div class="row">
            <div class="col-xl-12">

                <!--<div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-12">-->
                                <!-- Nav tabs -->
                                <ul ngbNav #nav="ngbNav" [activeId]="activeTab" class="nav nav-pills nav-conect nav-justified"><!-- mb-3 nav-tabs    nav nav-tabs-->
                                    <li [ngbNavItem]="1" class="nav-item waves-effect waves-light">
                                        <a ngbNavLink (click)="changeTab(1)">
                                            <span class="d-sm-block">
                                                <i class="ri-user-2-line align-middle me-2" style="
                                                border: 1px #c4cadc solid;
                                                border-radius: 24px;
                                                padding: 10px;
                                                background: #c4cadc;
                                            "></i> Identifica</span>
                                        </a>
                                        <ng-template ngbNavContent>
                                            <ng-template [ngTemplateOutlet]="TabContent"></ng-template>
                                        </ng-template>
                                    </li>
                                    <li [ngbNavItem]="2" class="nav-item waves-effect waves-light">
                                        <a ngbNavLink (click)="changeTab(2)">
                                            <!--<div class="avatar-sm">
                                                <span class="avatar-title text-primary rounded-4 fs-6 bg-soft-primary">
                                                <i class="ri-truck-fill"></i>
                                                </span>
                                            </div>-->
                                            <span class="d-sm-block">
                                                <i class="ri-truck-fill align-middle me-2" style="
                                                border: 1px #c4cadc solid;
                                                border-radius: 24px;
                                                padding: 10px;
                                                background: #c4cadc;
                                            "></i>
                                                Vincula
                                            </span>
                                        </a>
                                        <ng-template ngbNavContent>
                                            <ng-template [ngTemplateOutlet]="TabContent1"></ng-template>
                                        </ng-template>
                                    </li>
                                    <li [ngbNavItem]="3" class="nav-item waves-effect waves-light">
                                        <a ngbNavLink (click)="changeTab(3)">
                                            <span class="d-sm-block">
                                                <i class="ri-truck-fill align-middle me-2" style="
                                                border: 1px #c4cadc solid;
                                                border-radius: 24px;
                                                padding: 10px;
                                                background: #c4cadc;
                                            "></i>
                                            Configura</span>
                                        </a>
                                        <ng-template ngbNavContent>
                                            <ng-template [ngTemplateOutlet]="TabContent2"></ng-template>
                                        </ng-template>
                                    </li>
                                    <li [ngbNavItem]="4" class="nav-item waves-effect waves-light">
                                        <a ngbNavLink (click)="changeTab(4)">
                                            <span class="d-sm-block">
                                                <i class="ri-bank-card-line align-middle me-2" style="
                                                border: 1px #c4cadc solid;
                                                border-radius: 24px;
                                                padding: 10px;
                                                background: #c4cadc;
                                            "></i>
                                            Finaliza</span>
                                        </a>
                                        <ng-template ngbNavContent>
                                            <ng-template [ngTemplateOutlet]="TabContent3"></ng-template>
                                        </ng-template>
                                    </li>
                                </ul>
                                <!-- Tab panes -->
                                <div class="tab-content  text-muted">
                                    <div [ngbNavOutlet]="nav"></div>
                                </div>
                            </div>
                        </div>
                </div>
                </div>

<ng-template #TabContent>
<div class="card">  
<div class="card-body">  
  <div class="row g-4 mb-3">
    <div class="col-sm-auto">
        
    </div>
    <div class="col-sm">
        <div class="d-flex justify-content-sm-end gap-2">
            <div class="search-box ms-2">
                <input type="text" class="form-control" placeholder="Buscar el cuerpo legal" [(ngModel)]="term"><!--"service.searchTerm"-->
                <i class="ri-search-line search-icon"></i>
            </div>
        </div>
    </div>
  </div>
  
  <div style="min-height: 600px;">
  <div class="row">
   
    <app-toastsp aria-live="polite" aria-atomic="true"></app-toastsp>
    
    <div class="col-xxl-3 col-sm-6 project-card" *ngFor="let data of normasListWidgets | filter:term" id="pl1_{{data.normaId}}">
        <div [ngClass]="!validateIdNorma(data.normaId) ? 'card card-height-100 border card-border-success right' : 'card card-height-100'">
            <div class="card-body">
                <span class="float-end" style="font-size: 20px;" *ngIf="!validateIdNorma(data.normaId)"><i class="ri-checkbox-circle-fill text-success"></i></span>
                <div class="d-flex flex-column h-100 text-center">
                    <div style="cursor:pointer;" (click)="conectCuerpo(data.normaId, data)">
                    <div class="d-flex">
                        <div class="flex-grow-1">
                        </div>
                        <div class="flex-shrink-0">
                            <div class="d-flex gap-1 align-items-center">
                                
                            </div>
                        </div>
                    </div>
                    <div class="d-flex mb-2"><!--routerLink="/pages/{{data.id}}/steps"-->
                        <!--<div class="flex-shrink-0 me-3">
                            <div class="avatar-sm">
                                <span class="avatar-title bg-soft-warning rounded p-2">
                                    <img src="{{data.img}}" alt="" class="img-fluid p-1">
                                </span>
                            </div>
                        </div>-->
                        <div class="flex-grow-1">
                            <h5 class="mb-1 fs-15"><label style="color: #405189;"><!--<a routerLink="/projects/overview" class="text-dark">{{data.label}}</a>-->{{data.identificador ? data.identificador.tipoNorma+' '+data.identificador.numero : ''}}</label></h5>
                            <!--<p class="text-muted text-truncate-two-lines mb-3">{{data.tituloNorma ? data.tituloNorma : ''}}</p>-->
                            <ng-container *ngFor="let org of data.organismos">
                                <p class="card-subtitle text-muted mb-0">{{org}}</p>
                            </ng-container>
                        </div>
                    </div>
                    <div class="mt-auto">
                        <div class="d-flex mb-2">
                            <div class="flex-grow-1">
                                <!--<div>Creado por: Jhoan Zerpa</div>-->
                            </div>
                        </div>
                    </div>
                    <div class="mt-auto">
                        <div class="d-flex mb-2">
                            <div class="flex-grow-1">
                                <div><i style="font-size: 30px;" class="ri-zoom-in-line"></i></div>
                                <div>Monitoreo</div>
                            </div>
                            <div class="flex-grow-1">
                                <div><i style="font-size: 30px;" class="ri-git-repository-line"></i></div>
                                <div>Reporte</div>
                            </div>
                            <div class="flex-grow-1">
                                <div><i style="font-size: 30px;" class="ri-file-list-3-line"></i></div>
                                <div>Permiso</div>
                            </div>
                            <!--<div class="flex-shrink-0">
                                <div><i class="ri-list-check align-bottom me-1 text-muted"></i>{{data.number ? data.number : '1/100'}}</div>
                            </div>-->
                        </div>
                    </div>
                    
                    <div class="mt-auto">
                        <div class="d-flex mb-2">
                            <div class="flex-grow-1">
                                <div><h4>0</h4></div>
                                <div>ArtÃ­culos Aplicables</div>
                            </div>
                            <div class="flex-grow-1">
                                <div><h4>0</h4></div>
                                <div>Vinculaciones</div>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div class="mt-auto">
                        <a _ngcontent-mpd-c393="" href="javascript:void(0);" routerLink="/projects/{{project_id}}/identification/bodylegal/{{data.normaId}}/Detail" class="btn btn-light" style="width: 100%;">Ver detalle</a>
                    </div>
                </div>
  
            </div>
            <!-- end card body -->
        </div>
    </div>
    <div *ngIf="!normasListWidgets || normasListWidgets.length == 0">
      <!--<div style="text-align: center;width: 100%;">
          <img src="assets/images/file.png" width="300" height="200"/>
      </div>-->
      <div style="text-align: center;width: 100%;font-size: 20px;">
          No hay datos para mostrar
      </div>
    </div>
  </div>
  </div>
  
<div class="pagination justify-content-start mb-0"><!-- class="row g-0 text-center text-sm-start align-items-center mb-4" style="padding: 0px;position: fixed;bottom: 75px;width: 100%;"-->
    <div class="col-sm-7">
        <div>
            <p class="mb-sm-0 text-muted">Mostrando pÃ¡gina <span class="fw-semibold">1</span> de <span class="fw-semibold">{{pageTotal(pagLength)}}</span> de <span class="fw-semibold text-decoration-underline">{{pagLength}}</span> registros</p>
        </div>
    </div>
    <!-- end col -->
    <div class="col-sm-5">
        <ul class="pagination pagination-separated justify-content-center justify-content-sm-end mb-sm-0">
            <li class="page-item disabled">
                <a href="javascript:void(0);" class="page-link">Anterior</a>
            </li>
            <li class="page-item active">
                <a href="javascript:void(0);" class="page-link">1</a>
            </li>
            <!--<li class="page-item ">
                <a href="javascript:void(0);" class="page-link">2</a>
            </li>-->
            <li class="page-item">
                <a href="javascript:void(0);" class="page-link">Siguiente</a>
              </li>
          </ul>
      </div><!-- end col -->
    </div><!-- end row -->
</div>
</div>

<div class="row">
    <div class="col-12">
        <button class="btn btn-primary btn-label waves-effect right waves-light" style="float:right;" (click)="saveCuerpos()"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i> Siguiente</button>
    </div>
</div>

</ng-template>

<ng-template #TabContent1>
    <div class="card">  
        <div class="card-body">  
          <div class="row g-4 mb-3">
            <div class="col-sm-auto">
                
            </div>
            <div class="col-sm">
                <div class="d-flex justify-content-sm-end gap-2">
                    <div class="search-box ms-2">
                        <input type="text" class="form-control" placeholder="{{selectList ? 'Buscar el cuerpo legal' : 'Buscar la instalaciÃ³n'}}" [(ngModel)]="term"><!--"service.searchTerm"-->
                        <i class="ri-search-line search-icon"></i>
                    </div>
                    <div class="form-check form-switch form-check-right" style="margin-right: 30px;">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckRightDisabled" value="true" (change)="onChangeList($event)">
                        <label class="form-check-label" for="flexSwitchCheckRightDisabled">{{selectList ? 'Cuerpos Legales' : 'Instalaciones'}}</label>
                    </div>
                </div>
            </div>
          </div>

    <div class="row" *ngIf="selectList">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">

                    <div *ngIf="articles_proyects.length < 1">
                        <!--<div style="text-align: center;width: 100%;">
                            <img src="assets/images/file.png" width="300" height="200"/>
                        </div>-->
                        <div style="text-align: center;width: 100%;font-size: 20px;">
                            AÃºn no tiene cuerpos aplicables
                        </div>
                    </div>

                    <div *ngIf="articles_proyects.length > 0">            
                            <div class="list-group">
                                    <h5 style="color: #405189;">CUERPOS LEGALES SELECCIONADOS</h5>

                                    <ng-container *ngFor="let s of articles_proyects_group;">

                                    <div class="team-list list-view-filter row">
                                        <div class="col">
                                            <div class="card team-box">
                                                <div class="team-cover">
                                                    
                                                </div>
                                                <div class="card-body p-4">                
                                                    <div class="row align-items-center team-row">
                                                        <div class="col team-settings">
                                                            <div class="row">
                                                                <div class="col">
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col">
                                                            <div class="team-profile-img">
                                                                
                                                                <div class="form-check form-check-inline form-radio-success mb-3">
                                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="true">
                                                                    
                                                                    <label class="form-check-label" for="inlineCheckbox1">
                                                                        <h5 class="fs-16 mb-1" style="color: #405189;">{{s.cuerpoLegal}}</h5>
                                                                    </label>
                                                                </div>
                                                                <!--<div class="team-content">
                                                                    <a data-bs-toggle="offcanvas"
                                                                        aria-controls="offcanvasExample">
                                                                    </a>
                                                                </div>-->
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="col-lg-6 col">
                                                        <p class="card-text mb-2" [style]="s.encabezado && s.encabezado.length > 250 ? 'min-height: 60px;' : 'min-height: 80px;'">{{s.encabezado ? (s.encabezado.length > 250 ? formatArticle(s.encabezado, s.id) : s.encabezado) : ''}}</p>
                                                        <p class="card-text">
                                                            <small [ngClass]="!validateIdparte(s.id) ? 'text-success' : 'text-success'" style="cursor: pointer;" *ngIf="s.encabezado && s.encabezado.length > 250 && !validatShow(s.id)" (click)="showText(s.id)"><b>Leer mÃ¡s</b></small>
                                                            <small [ngClass]="!validateIdparte(s.id) ? 'text-success' : 'text-success'" style="cursor: pointer;" *ngIf="s.encabezado && s.encabezado.length > 250 && validatShow(s.id)" (click)="hideText(s.id)"><b>Ocultar texto completo</b></small>
                                                        </p>
                                                        </div>
                                                        
                                                        <div class="col-lg-2 col">
                                                            <div class="row text-muted text-center">
                                                                
                                                                <div class="col-12">
                                                                    <h5 class="mb-1">0</h5>
                                                                    <p class="text-muted mb-0">Instalaciones</p>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-2 col">
                                                                <button
                                                                    class="btn btn-light view-btn" style="width: 100%;"  data-bs-target="#showModal" (click)="openModal(content, s.id)">Vincular</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--end card-->
                                        </div>
                                    </div>
                                    </ng-container>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>

    <div class="row" *ngIf="!selectList">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">

                    <div *ngIf="installations_data.length < 1">
                        <!--<div style="text-align: center;width: 100%;">
                            <img src="assets/images/file.png" width="300" height="200"/>
                        </div>-->
                        <div style="text-align: center;width: 100%;font-size: 20px;">
                            AÃºn no tiene instalaciones
                        </div>
                    </div>

                    <div *ngIf="installations_data.length > 0">            
                            <div class="list-group">
                                <ng-container *ngFor="let ig of installations_group;">
                                    <h4 style="color: #405189;">{{ig.area}}</h4>

                                    <ng-container *ngFor="let v of ig.instalaciones;">

                                    <div class="team-list list-view-filter row">
                                        <div class="col">
                                            <div class="card team-box">
                                                <div class="team-cover">
                                                    
                                                </div>
                                                <div class="card-body p-4">                
                                                    <div class="row align-items-center team-row">
                                                        <div class="col team-settings">
                                                            <div class="row">
                                                                <div class="col">
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col">
                                                            <div class="team-profile-img">
                                                                
                                                                <div class="form-check form-check-inline form-radio-success mb-3">
                                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="true">
                                                                    
                                                                    <label class="form-check-label" for="inlineCheckbox1">
                                                                        <h5 class="fs-16 mb-1" style="color: #405189;">{{v.nombre}}</h5>
                                                                    </label>
                                                                </div>
                                                                <!--<div class="team-content">
                                                                    <a data-bs-toggle="offcanvas"
                                                                        aria-controls="offcanvasExample">
                                                                    </a>
                                                                </div>-->
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="col-lg-5 col">
                                                        <p>{{v.descripcion}}</p>
                                                        </div>

                                                        <div class="col-lg-3 col">
                                                            <div class="row text-muted text-center">
                                                                <div class="col-6 border-end border-end-dashed">
                                                                    <h5 class="mb-1">{{v.installations_articles ? v.installations_articles.length : 0
                                                                    }}</h5>
                                                                    <p class="text-muted mb-0">Vinculaciones</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col">
                                                                <button
                                                                    class="btn btn-light view-btn" style="width: 100%;"
                                                                    data-bs-target="#showModal" (click)="openModal2(content2, v.id)">Vincular</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--end card-->
                                        </div>
                                    </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
</div>
    <div class="row">
        <div class="col-lg-12"> 
            <div style="float:right;"><!--class="row justify-content-end"-->
                <button type="button" class="btn btn-primary btn-label waves-effect right waves-light"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i> Siguiente</button>
            </div>
        </div>
    </div>
    
<!-- Add Instalaciones -->
<ng-template #content role="document" let-modal>
    <div class="modal-header bg-light p-3">
        <h5 class="modal-title" id="exampleModalLabel">Vincular Instalaciones</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar" id="close-modal"
            (click)="modal.dismiss('Cross click')"></button>
    </div>
    <form (ngSubmit)="saveInstallation()" [formGroup]="installationForm" class="tablelist-form" autocomplete="off">
        <div class="modal-body">

            <input type="hidden" name="id" value="" formControlName="ids" />

            <div class="mb-3" id="modal-id" style="display: none;">
                <label for="id-field" class="form-label">ID</label>
                <input type="text" id="id-field" class="form-control" placeholder="ID" readonly />
            </div>

            <div class="mb-3">
                <label for="area-field" class="form-label">Area Administrativa</label>
                <select class="form-select mb-3" aria-label="Area Administrativa" placeholder="Seleccione Area Administrativa"
                (change)="selectArea($event)">
                    <option selected>Seleccione Area Administrativa </option>
                    <option *ngFor="let r of areas;" value="{{r.id}}">{{r.nombre}}</option>
                </select>
                <div class="invalid-feedback">Por favor ingresar area administrativa.</div>
            </div>
            
            <ng-container *ngFor="let item of items;let i = index;">
                <div class="mb-3">
                    <label for="area-field" class="form-label">Sub Area Administrativa</label>
                    <select class="form-select mb-3" placeholder="Seleccione Sub Area Administrativa" (change)="selectAreaChildren($event, i)">
                        <option selected>Seleccione Sub Area Administrativa</option>
                        <option *ngFor="let o of item.options;" value="{{o.id}}">{{o.nombre}}</option>
                    </select>
                    <div class="invalid-feedback">Por favor ingresar area administrativa.</div>
                </div>
            </ng-container>

            <div class="mb-3">
                <div class="search-box">
                    <input type="text" class="form-control" placeholder="Buscar instalaciÃ³n..."><!--"service.searchTerm"-->
                    <i class="ri-search-line search-icon"></i>
                </div>
            </div>

            <div class="mb-3">
                <div class="list-group">
                    
                    <ng-container *ngFor="let o of installations;">
                        <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="{{o.id}}" name="checkAll"
                        id="{{o.id}}" (change)="onCheckboxChange($event)"><!--checked-->
                        {{o.nombre}}
                        </label>
                    </ng-container>
                </div>
            </div>

        </div>
        <div class="modal-footer">
            <div class="hstack gap-2 justify-content-end">
                <button type="submit" class="btn btn-success" id="add-btn">Vincular</button>
            </div>
        </div>
    </form>
</ng-template>

<!-- Add Cuerpos -->
<ng-template #content2 role="document" let-modal>
    <div class="modal-header bg-light p-3">
        <h5 class="modal-title" id="exampleModalLabel">Vincular Cuerpos Legales</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar" id="close-modal"
            (click)="modal.dismiss('Cross click')"></button>
    </div>
    <form (ngSubmit)="saveCuerpo()" [formGroup]="cuerpoForm" class="tablelist-form" autocomplete="off">
        <div class="modal-body">

            <input type="hidden" name="id" value="" formControlName="ids" />

            <div class="mb-3" id="modal-id" style="display: none;">
                <label for="id-field" class="form-label">ID</label>
                <input type="text" id="id-field" class="form-control" placeholder="ID" readonly />
            </div>
            

            <div class="mb-3">
                <label for="area-field" class="form-label">Cuerpo Legal</label>
                <select class="form-select mb-3" aria-label="Cuerpo Legal" placeholder="Seleccione Cuerpo Legal"
                (change)="selectCuerpoLegal($event)">
                    <option selected>Seleccione Cuerpo Legal </option>
                    <option *ngFor="let pg of articles_proyects_group;" value="{{pg.cuerpoLegal}}">{{pg.cuerpoLegal}}</option>
                </select>
                <div class="invalid-feedback">Por favor ingresar Cuerpo Legal.</div>
            </div>

            <div class="mb-3">
                <div class="search-box">
                    <input type="text" class="form-control" placeholder="Buscar Articulo..."><!--"service.searchTerm"-->
                    <i class="ri-search-line search-icon"></i>
                </div>
            </div>

            <div class="mb-3">
                <div class="list-group">
                    
                    <ng-container *ngFor="let a of articulos;">
                        <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="{{a.id}}" name="checkAll"
                        id="{{a.id}}" (change)="onCheckboxChange2($event)"><!--checked-->
                        {{a.articulo}}
                        </label>
                    </ng-container>
                </div>
            </div>

        </div>
        <div class="modal-footer">
            <div class="hstack gap-2 justify-content-end">
                <button type="submit" class="btn btn-success" id="add-btn">Vincular</button>
            </div>
        </div>
    </form>
</ng-template>

</ng-template>

<ng-template #TabContent2>
    
    <div class="card">  
        <div class="card-body">  
          <div class="row g-4 mb-3">
            <div class="col-sm-auto">
                
            </div>
            <div class="col-sm">
                <div class="d-flex justify-content-sm-end gap-2">
                    <div class="search-box ms-2">
                        <input type="text" class="form-control" placeholder="Buscar el cuerpo legal" [(ngModel)]="term"><!--"service.searchTerm"-->
                        <i class="ri-search-line search-icon"></i>
                    </div>
                </div>
            </div>
          </div>

          <!--<div class="row" style="margin-top: 20px;">
            <div class="col-xxl-12 col-lg-12">
                
                <div class="row">
                    <div class="col-xxl-2 col-lg-2" >
                        <div style="border: 1px solid #c0c0c0;background-color: #f3f6f9;
                        cursor: pointer;
                        border-radius: 24px;
                        align-items: center;
                        word-wrap: break-word;
                        word-break: break-all;
                        min-height: 30px;
                        display:flex;
                        justify-content: center;
                        align-items: center;" [ngClass]="{'div-texto-check texto-check': validateCuerpo('Cuerpo Legal')}" (click)="selectCuerpo('Cuerpo Legal')">Cuerpo Legal
                        </div>
                    </div>
                    
                    <div class="col-xxl-2 col-lg-2" >
                        <div style="border: 1px solid #c0c0c0;background-color: #f3f6f9;
                        cursor: pointer;
                        border-radius: 24px;
                        align-items: center;
                        word-wrap: break-word;
                        word-break: break-all;
                        min-height: 30px;
                        display:flex;
                        justify-content: center;
                        align-items: center;" [ngClass]="{'div-texto-check texto-check': validateCuerpo('InstalaciÃ³n')}" (click)="selectCuerpo('InstalaciÃ³n')">InstalaciÃ³n
                        </div>
                    </div>
                    
                    <div class="col-xxl-2 col-lg-2" >
                        <div style="border: 1px solid #c0c0c0;background-color: #f3f6f9;
                        cursor: pointer;
                        border-radius: 24px;
                        align-items: center;
                        word-wrap: break-word;
                        word-break: break-all;
                        min-height: 30px;
                        display:flex;
                        justify-content: center;
                        align-items: center;">Vincular SelecciÃ³n
                        </div>
                    </div>
                </div>
            </div>
        </div>-->

    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">

                    <div *ngIf="articles_proyects.length < 1">
                        <!--<div style="text-align: center;width: 100%;">
                            <img src="assets/images/file.png" width="300" height="200"/>
                        </div>-->
                        <div style="text-align: center;width: 100%;font-size: 20px;">
                            AÃºn no tiene articulos aplicables
                        </div>
                    </div>

                    <div *ngIf="articles_proyects.length > 0">            
                            <div class="list-group">
                                <ng-container *ngFor="let g of articles_proyects_group;">
                                    <h4 style="color: #405189;">{{g.cuerpoLegal}}</h4>
                                    <p>{{g.organismo}}</p>

                                    <ng-container *ngFor="let s of g.articulos;">

                                    <div class="team-list list-view-filter row" *ngIf="s.tipoParte == 'ArtÃ­culo'">
                                        <div class="col">
                                            <div class="card team-box">
                                                <div class="team-cover">
                                                    
                                                </div>
                                                <div class="card-body p-4">                
                                                    <div class="row align-items-center team-row">
                                                        <div class="col team-settings">
                                                            <div class="row">
                                                                <div class="col">
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-1 col">
                                                            <div class="form-check form-check-inline form-radio-success mb-3">
                                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="true">
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6 col">
                                                            <div ><!--class="team-profile-img"-->
                                                                <div>
                                                                <h5 class="fs-16 mb-1" style="color: #405189;">{{s.tipoParte +' '+ s.articulo}}</h5>
                                                                </div>
                                                                <p class="card-text mb-2" [style]="s.descripcion && s.descripcion.length > 250 ? 'min-height: 60px;' : 'min-height: 80px;'">{{s.descripcion ? (s.descripcion.length > 250 ? formatArticle(s.descripcion, s.id) : s.descripcion) : s.tipoParte}}</p>
                                                                <p class="card-text">
                                                                            <small [ngClass]="!validateIdparte(s.id) ? 'text-success' : 'text-success'" style="cursor: pointer;" *ngIf="s.descripcion && s.descripcion.length > 250 && !validatShow(s.id)" (click)="showText(s.id)"><b>Leer mÃ¡s</b></small>
                                                                            <small [ngClass]="!validateIdparte(s.id) ? 'text-success' : 'text-success'" style="cursor: pointer;" *ngIf="s.descripcion && s.descripcion.length > 250 && validatShow(s.id)" (click)="hideText(s.id)"><b>Ocultar texto completo</b></small>
                                                                </p>        
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                        <div class="col-lg-1 col">
                                                            <i [ngClass]="{'icon-check': s.monitoreo}" style="font-size: 30px;" class="ri-zoom-in-line"></i>
                                                        </div>
                                                        
                                                        <div class="col-lg-1 col">
                                                            <i [ngClass]="{'icon-check': s.reporte}" style="font-size: 30px;" class="ri-git-repository-line"></i>
                                                        </div>
                                                        
                                                        <div class="col-lg-1 col">
                                                            <i [ngClass]="{'icon-check': s.permiso}" style="font-size: 30px;" class="ri-file-list-3-line"></i>
                                                        </div>

                                                        <!--<div class="col-lg-4 col">
                                                            <div class="row text-muted text-center">
                                                                <div class="col-6 border-end border-end-dashed">
                                                                    <h5 class="mb-1">0</h5>
                                                                    <p class="text-muted mb-0">Proyectos</p>
                                                                </div>
                                                                <div class="col-6">
                                                                    <h5 class="mb-1">0</h5>
                                                                    <p class="text-muted mb-0">Tareas</p>
                                                                </div>
                                                            </div>
                                                        </div>-->
                                                        <div class="col-lg-2 col">
                                                                <button
                                                                    class="btn btn-light view-btn" style="width: 100%;"  data-bs-target="#showModal" (click)="openModal(content, s.id)">Configurar instalaciones</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--end card-->
                                        </div>
                                    </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
</div>
    <div class="row">
        <div class="col-lg-12"> 
            <div style="float:right;"><!--class="row justify-content-end"-->
                <button type="button" class="btn btn-primary btn-label waves-effect right waves-light"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i> Siguiente</button>
            </div>
        </div>
    </div>
    
<!-- Add Instalaciones -->
<ng-template #content role="document" let-modal>
    <div class="modal-header bg-light p-3">
        <h5 class="modal-title" id="exampleModalLabel">Vincular Instalaciones</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar" id="close-modal"
            (click)="modal.dismiss('Cross click')"></button>
    </div>
    <form (ngSubmit)="saveInstallation()" [formGroup]="installationForm" class="tablelist-form" autocomplete="off">
        <div class="modal-body">

            <input type="hidden" name="id" value="" formControlName="ids" />

            <div class="mb-3" id="modal-id" style="display: none;">
                <label for="id-field" class="form-label">ID</label>
                <input type="text" id="id-field" class="form-control" placeholder="ID" readonly />
            </div>

            <div class="mb-3">
                <label for="area-field" class="form-label">Area Administrativa</label>
                <select class="form-select mb-3" aria-label="Area Administrativa" placeholder="Seleccione Area Administrativa"
                (change)="selectArea($event)">
                    <option selected>Seleccione Area Administrativa </option>
                    <option *ngFor="let r of areas;" value="{{r.id}}">{{r.nombre}}</option>
                </select>
                <div class="invalid-feedback">Por favor ingresar area administrativa.</div>
            </div>
            
            <ng-container *ngFor="let item of items;let i = index;">
                <div class="mb-3">
                    <label for="area-field" class="form-label">Sub Area Administrativa</label>
                    <select class="form-select mb-3" placeholder="Seleccione Sub Area Administrativa" (change)="selectAreaChildren($event, i)">
                        <option selected>Seleccione Sub Area Administrativa</option>
                        <option *ngFor="let o of item.options;" value="{{o.id}}">{{o.nombre}}</option>
                    </select>
                    <div class="invalid-feedback">Por favor ingresar area administrativa.</div>
                </div>
            </ng-container>

            <div class="mb-3">
                <div class="search-box">
                    <input type="text" class="form-control" placeholder="Buscar instalaciÃ³n..."><!--"service.searchTerm"-->
                    <i class="ri-search-line search-icon"></i>
                </div>
            </div>

            <div class="mb-3">
                <div class="list-group">
                    
                    <ng-container *ngFor="let o of installations;">
                        <label class="list-group-item">
                        <input class="form-check-input me-1" type="checkbox" value="{{o.id}}" name="checkAll"
                        id="{{o.id}}" (change)="onCheckboxChange($event)"><!--checked-->
                        {{o.nombre}}
                        </label>
                    </ng-container>
                </div>
            </div>

        </div>
        <div class="modal-footer">
            <div class="hstack gap-2 justify-content-end">
                <button type="submit" class="btn btn-success" id="add-btn">Vincular</button>
            </div>
        </div>
    </form>
</ng-template>

</ng-template>

<ng-template #TabContent3>
    <!--<app-compliance></app-compliance>-->
</ng-template>