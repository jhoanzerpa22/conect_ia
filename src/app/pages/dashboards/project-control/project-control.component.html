<!-- Start Breadcrumbs -->
<app-breadcrumbs title="{{project.nombre}}" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

 <div class="row project-wrapper">
    <div class="col-xxl-12">
        
  <div class="row">
    <div class="col-xxl-12">
        <!--<h5 class="mb-3">Header Justify Tabs</h5>-->
        <div class="card">
            <div class="card-header align-items-xl-center d-xl-flex">
                <div class="flex-grow-1 mb-xl-0">
                    <button class="btn btn-primary btn-label waves-effect left waves-light" routerLink="/{{project_id}}/project-dashboard"  *ngIf="validateRol(1) || validateRol(2)"><i class="ri-arrow-left-line label-icon align-middle fs-16"></i> Evaluación</button>
                </div>
                <!--<p class="text-muted flex-grow-1 mb-xl-0">Use <code>card-header-pills</code> class to create header justify tab.</p>-->
                <div class="flex-shrink-0">
                    <button type="button" class="btn btn-primary btn-label right waves-effect waves-light" (click)="goDashboard()"><i class="ri-arrow-right-line label-icon align-middle fs-16"></i> Dashboard</button>
                </div>
            </div><!-- end card header -->
            <div class="card-body">
                <!-- Tab panes -->
                <div class="tab-content text-muted">
                    <div class="row">
                        <div class="col-lg-12">
                            
                            <div class="row g-4 mb-3">
                                <div class="col-sm">
                                    <div class="row g-4 mb-3">    
                                        <div class="col-12">
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                <button type="button" class="btn btn-primary dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;" data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>{{ !filtro_cuerpo ? 'CUERPO LEGAL' : filtro_cuerpo }}</button>    
                                                <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle></button>
                                                <div class="dropdown-menu dropdown-menu-dark"  style="width: 100%;height: 200px;overflow-y:scroll;" ngbDropdownMenu>
                                                    <a class="dropdown-item" [ngClass]="!filtro_cuerpo ? 'active' : ''" href="javascript:void(0);" (click)="selectCuerpoFiltro()">Todos</a>
                                                    
                                                    <ng-container *ngFor="let g of articles_proyects_group;">
                                                        
                                                    <a class="dropdown-item" [ngClass]="filtro_cuerpo && filtro_cuerpo == g.cuerpoLegal ? 'active' : ''" href="javascript:void(0);" (click)="selectCuerpoFiltro(g.cuerpoLegal,g.normaId)">{{g.cuerpoLegal}}</a>
            
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row g-4 mb-3">   
                                          
                                        <div class="col-3">
                                            
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;
                                                background: white;
                                            " data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>{{ !tipo_cuerpo ? 'Cumplimiento' : tipo_cuerpo }}</button>    
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-toggle-split ml-auto" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle></button>
                                                <div class="dropdown-menu dropdown-menu-dark" style="width: 100%;" ngbDropdownMenu>
                                                    <a class="dropdown-item" [ngClass]="!tipo_cuerpo ? 'active' : ''" href="javascript:void(0);" (click)="selectTipoCuerpo()">Todos</a>
                                                    <a class="dropdown-item" [ngClass]="tipo_cuerpo && tipo_cuerpo == 'Cumple' ? 'active' : ''" href="javascript:void(0);" (click)="selectTipoCuerpo('Cumple')">Cumple</a>
                                                    <a class="dropdown-item" [ngClass]="tipo_cuerpo && tipo_cuerpo == 'Cumple Parcial' ? 'active' : ''" href="javascript:void(0);" (click)="selectTipoCuerpo('Cumple Parcial')">Cumple Parcial</a>
                                                    <a class="dropdown-item" [ngClass]="tipo_cuerpo && tipo_cuerpo == 'No Cumple' ? 'active' : ''" href="javascript:void(0);" (click)="selectTipoCuerpo('No Cumple')">No Cumple</a>
                                                    <a class="dropdown-item" [ngClass]="tipo_cuerpo && tipo_cuerpo == 'No Evaluado' ? 'active' : ''" href="javascript:void(0);" (click)="selectTipoCuerpo('No Evaluado')">No Evaluado</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-3">
        
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;
                                                background: white;
                                            " data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle [disabled]="!tipo_cuerpo">{{ !criticidad_cuerpo ? 'Criticidad' : criticidad_cuerpo }}</button>    
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-toggle-split ml-auto" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle [disabled]="!tipo_cuerpo"></button>
                                                <div class="dropdown-menu dropdown-menu-dark"  style="width: 100%;" ngbDropdownMenu>
                                                    <a class="dropdown-item" [ngClass]="!criticidad_cuerpo ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo()">Ninguno</a>
                                                    <a class="dropdown-item" [ngClass]="criticidad_cuerpo && criticidad_cuerpo == 'Todos' ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo('Todos')">Todos</a>
                                                    <a class="dropdown-item" [ngClass]="criticidad_cuerpo && criticidad_cuerpo == 'Alta' ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo('Alta')">Alta</a>
                                                    <a class="dropdown-item" [ngClass]="criticidad_cuerpo && criticidad_cuerpo == 'Media' ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo('Media')">Media</a>
                                                    <a class="dropdown-item" [ngClass]="criticidad_cuerpo && criticidad_cuerpo == 'Baja' ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo('Baja')">Baja</a>
                                                    <a class="dropdown-item" [ngClass]="criticidad_cuerpo && criticidad_cuerpo == 'No especificado' ? 'active' : ''" href="javascript:void(0);" (click)="selectCriticidadCuerpo('No especificado')">No especificado</a>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-3">
                    
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;
                                                background: white;
                                            " data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>{{ !filtro_atributo ? 'Seleccione el atributo' : filtro_atributo }}</button>    
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-toggle-split ml-auto" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle></button>
                                                <div class="dropdown-menu dropdown-menu-dark" style="width: 100%;" ngbDropdownMenu>
                                                    <a class="dropdown-item" [ngClass]="!filtro_atributo ? 'active' : ''" href="javascript:void(0);" (click)="selectAtributoFiltro()">Todos</a>
                                                    
                                                    <a class="dropdown-item" [ngClass]="filtro_atributo && filtro_atributo == 'Permiso' ? 'active' : ''" href="javascript:void(0);" (click)="selectAtributoFiltro('Permiso')">Permiso</a>
                                                    
                                                    <a class="dropdown-item" [ngClass]="filtro_atributo && filtro_atributo == 'Reporte' ? 'active' : ''" href="javascript:void(0);" (click)="selectAtributoFiltro('Reporte')">Reporte</a>
                                                    
                                                    <a class="dropdown-item" [ngClass]="filtro_atributo && filtro_atributo == 'Monitoreo' ? 'active' : ''" href="javascript:void(0);" (click)="selectAtributoFiltro('Monitoreo')">Monitoreo</a>
                                                    
                                                    <a class="dropdown-item" [ngClass]="filtro_atributo && filtro_atributo == 'Otros' ? 'active' : ''" href="javascript:void(0);" (click)="selectAtributoFiltro('Otros')">Otras Obligaciones</a>
                                                </div>
                                            </div>
                    
                                        </div>
            
                                        
                                        <div class="col-3">
                    
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;
                                                background: white;
                                            " data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>{{ !filtro_articulo ? 'Seleccione el árticulo' : filtro_articulo }}</button>
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-toggle-split ml-auto" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle></button>
                                                <div class="dropdown-menu dropdown-menu-left dropdown-menu-dark" style="width: 100%;height: 200px;overflow-y:scroll;" ngbDropdownMenu>
                                                    <a class="dropdown-item" [ngClass]="!filtro_articulo ? 'active' : ''" href="javascript:void(0);" (click)="selectArticuloFiltro()">Todos</a>
            
                                                    <ng-container *ngFor="let ach of articles_filter">
                                                        <a class="dropdown-item" [ngClass]="filtro_articuloId && filtro_articuloId == ach.id ? 'active' : ''" href="javascript:void(0);" (click)="selectArticuloFiltro(ach.id, ach.articulo)">{{ach.articulo}}</a>
                                                    </ng-container>
                                                </div>
                                            </div>
                    
                                        </div>
                                    </div>
                                    
                                    <div class="row g-4 mb-3">
            
                                        <div class="col-12">
                    
                                            <div class="btn-group" style="width: 100%;" ngbDropdown>
                                                
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-disable" style="
                                                width: 100%;
                                                text-align: left;
                                                background: white;
                                            " data-bs-toggle="dropdown"  aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>{{ !filtro_area_cuerpo ? 'Selecciona el área' : filtro_area_cuerpo }}</button>    
                                                <button type="button" class="btn btn-light dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle></button>
                                                <div class="dropdown-menu dropdown-menu-dark"  style="width: 100%;height: 200px;overflow-y:scroll;" ngbDropdownMenu>
                                                    
                                                    <a class="dropdown-item" [ngClass]="!filtro_area_cuerpo ? 'active' : ''" href="javascript:void(0);" (click)="selectAreaChartCuerpo()">Todos</a>
            
                                                    <ng-container *ngFor="let ar of installations_group;">
                                                        <a class="dropdown-item" [ngClass]="filtro_area_cuerpo && filtro_area_cuerpo == ar.area ? 'active' : ''" href="javascript:void(0);" (click)="selectAreaChartCuerpo(ar.area)">{{ar.area}}</a>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-auto">
                                    <div class="d-md-flex justify-content-sm-end gap-2">
                                        <div class="search-box ms-md-2 flex-shrink-0 mb-3 mb-md-0">
                                            <input type="text" class="form-control" style="width: 400px; margin-right: 30px;" placeholder="Buscar un Elemento" [(ngModel)]="searchTerm" (input)="filterList(searchTerm)"><!-- [(ngModel)]="term"-->
                                            <i class="ri-search-line search-icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                
                                    <div *ngIf="installations_data.length < 1">
                                        <div style="text-align: center;width: 100%;font-size: 20px;">
                                            Aún no tiene Elementos o actividades
                                        </div>
                                    </div>
                
                                    <div *ngIf="installations_data.length > 0">            
                                            <div class="list-group">
                                                <ng-container *ngFor="let ig of installations_group_filter"><!-- | filter_control:search;  filter:term;-->
                                                    <h4 style="color: #405189;">{{ig.area}}</h4>
                                                    <p>{{ig.descripcion}}</p>
                
                                                    <ng-container *ngFor="let v of ig.instalaciones;">
                
                                                    <div class="team-list list-view-filter row" style="cursor: pointer;" (click)="goDetail(v.id)">
                                                        <div class="col">
                                                            <div class="card team-box">
                                                                <div class="team-cover">
                                                                    
                                                                </div>
                                                                <div class="card-body p-4">                
                                                                    <div class="row align-items-center team-row">
                                                                        <div class="col team-settings">
                                                                            <div class="row">
                                                                                <div class="col">
                                                                                    
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-4 col">
                                                                            <div class="team-profile-img">
                                                                                
                                                                                <div class="form-check form-check-inline form-radio-primary mb-3">
                                                                                    <label class="form-check-label" for="inlineCheckbox1">
                                                                                        <h5 class="fs-16 mb-1" style="color: #405189;">{{v.nombre}}</h5>
                                                                                    </label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                
                                                                        <div class="col-lg-2 col">
                                                                            <div class="row text-muted text-center">
                                                                                <div class="col-12 border-end border-end-dashed">
                                                                                    <h5 class="mb-1">{{ v.updatedAt | date: 'd/M/yyyy' }}</h5>
                                                                                    <p class="text-muted mb-0">Última actualización</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                
                                                                        <div class="col-lg-2 col">
                                                                            <div class="row text-muted text-center">
                                                                                <div class="col-12 border-end border-end-dashed">
                                                                                    <h5 class="mb-1">{{v.total_cuerpos ? v.total_cuerpos : 0}}</h5>
                                                                                    <p class="text-muted mb-0">{{v.total_cuerpos && v.total_cuerpos == 1 ? 'Cuerpo Legal Vinculado' : 'Cuerpos legales Vinculados'}}</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="col-lg-2 col">
                                                                            <div class="row text-muted text-center">
                                                                                <div class="col-12 border-end border-end-dashed">
                                                                                    <h5 class="mb-1">{{v.total_articulos ? v.total_articulos : 0}}</h5>
                                                                                    <p class="text-muted mb-0">{{v.total_articulos && v.total_articulos == 1 ? 'Artículo Vinculado' : 'Artículos Vinculados'}}</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-lg-2 col">
                                                                            <div class="progress progress-xl">
                                                                                <div class="progress-bar" [ngClass]="{'bg-danger': v.avance > 0 && v.avance < 25, 'bg-warning': v.avance > 25 && v.avance < 75, 'bg-success': v.avance > 75 }" role="progressbar" [style]="v.avance > 0 ? 'width:'+(v.avance > 100 ? 100 : v.avance)+'%;':'width: 10%;color: #000;background: #eff2f7;'" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{(v.avance > 100 ? 100 : v.avance)}}%</div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    </ng-container>
                                                </ng-container>
                                            </div>
                                        </div>
                        </div>
                      </div>
                </div>
            </div><!-- end card-body -->
        </div><!-- end card -->
        </div><!--end col-->
        </div>
        
    </div><!-- end col -->

</div><!-- end row -->